type Company @model {
  id: ID!
  name: String!
  domain: String!
  room: [Room] @connection(name: "CompanyRoom")
  members: [User] @connection(name: "CompanyMembers")
}

type Room @model {
  id: ID!
  companyID: ID!
  company: Company! @connection(name: "CompanyRoom", fields: ["companyID"])
  name: String!
  description: String!
  tasks: [Task] @connection(name: "RoomTask", fields: ["id"])
  members: [User] @connection(name: "RoomMembers")
}

type Task @model {
  id: ID!
  authorID: ID!
  chargePersonID: ID
  roomID: ID!
  title: String!
  description: String
  scheduleDate: AWSDateTime
  priority: Int
  status: Int
  createdAt: AWSDateTime
  members: [User] @connection(name: "TaskMembers")
  chargePerson: User
    @connection(name: "chargeTaskMember", fields: ["chargePersonID"])
  room: Room! @connection(name: "RoomTask", fields: ["roomID"])
  messages: [Message] @connection(name: "TaskMessages", fields: ["id"])
}

type Message @model {
  id: ID!
  taskID: ID!
  author: User
  content: String!
  createdAt: AWSDateTime
  isSent: Boolean
  task: Task! @connection(name: "TaskMessages", fields: ["taskID"])
}

type User @model {
  id: ID!
  email: String!
  companyID: ID!
  username: String!
  tel: String
  positionName: String
  iconImage: String
  registered: Boolean
  authority: String
  roomMembers: [Room] @connection(name: "RoomMembers")
  chargeTasks: [Task] @connection(name: "chargeTaskMember", fields: ["id"])
  company: Company! @connection(name: "CompanyRoom", fields: ["companyID"])
}

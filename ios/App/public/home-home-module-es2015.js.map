{"version":3,"sources":["./src/app/pages/home/componet/list-room/list-room.component.html","./src/app/pages/home/home.page.html","./src/app/pages/home/componet/list-room/list-room.component.scss","./src/app/pages/home/componet/list-room/list-room.component.ts","./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.scss","./src/app/pages/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["export default \"<ion-list>\\n  <ion-list-header>\\n    <ion-label>Want to</ion-label>\\n    <ion-button (click)=\\\"presentAddRoomItem('002')\\\">\\n      <ion-icon name=\\\"add-outline\\\"></ion-icon>\\n    </ion-button>\\n  </ion-list-header>\\n  <ion-item-sliding #slidingItem *ngFor=\\\"let room of roomList\\\">\\n    <ion-item (click)=\\\"navigateToTask(room)\\\">\\n      <!-- <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"../../../assets/img/sojiro-taku.jpg\\\" />\\n      </ion-avatar> -->\\n      <ion-label>\\n        <h2>{{ room.name }}</h2>\\n        <p>{{ room.describe }}</p>\\n      </ion-label>\\n    </ion-item>\\n    <ion-item-options side=\\\"end\\\">\\n      <ion-item-option color=\\\"danger\\\">\\n        <ion-icon\\n          slot=\\\"icon-only\\\"\\n          name=\\\"trash\\\"\\n          (click)=\\\"deleteRoom(room.id)\\\"\\n        ></ion-icon>\\n      </ion-item-option>\\n    </ion-item-options>\\n  </ion-item-sliding>\\n</ion-list>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>会社名</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <app-list-room></app-list-room>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hvbWUvY29tcG9uZXQvbGlzdC1yb29tL2xpc3Qtcm9vbS5jb21wb25lbnQuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { AddRoomModalComponent } from '../../../../shared/component/modal/add-room-modal/add-room-modal.component';\nimport { HomeLogicService } from '../../logic/home-logic.service';\nimport { from } from 'rxjs';\nimport { flatMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-list-room',\n  templateUrl: './list-room.component.html',\n  styleUrls: ['./list-room.component.scss'],\n})\nexport class ListRoomComponent implements OnInit {\n\n  roomList: Array<any>;\n\n  constructor(\n    private modalCtrl: ModalController,\n    private homeLogic: HomeLogicService,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n    this.homeLogic.listRoom('takuCloudCom').subscribe((result) => {\n      this.roomList = result;\n    })\n  }\n\n  async presentAddRoomItem(companyId: string) {\n    const modal = await this.modalCtrl.create({\n      component: AddRoomModalComponent,\n    });\n\n    const observable = from(modal.onDidDismiss());\n    observable\n      .pipe(flatMap(({ data }) => this.homeLogic.createRoom(data)))\n      .pipe(flatMap(() => this.homeLogic.listRoom('takuCloudCom')))\n      .subscribe((response) => {\n        this.roomList = response;\n      })\n    return modal.present();\n  }\n\n  navigateToTask(room): void {\n    this.router.navigate(['task', `${room.id}`]);\n  }\n\n  deleteRoom(roomId): void {\n    this.homeLogic.deleteRoomItem(roomId).pipe(flatMap(() => this.homeLogic.listRoom('takuCloudCom')))\n      .subscribe((response) => {\n        this.roomList = response;\n      })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { HomePageRoutingModule } from './home-routing.module';\nimport { SharedModule } from '../../shared/shared.module';\nimport { HomePage } from './home.page';\nimport { ListRoomComponent } from './componet/list-room/list-room.component';\nimport { HomeService } from './service/home-service.service';\nimport { HomeLogicService } from './logic/home-logic.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    HomePageRoutingModule,\n    SharedModule,\n  ],\n  entryComponents: [\n\n  ],\n  declarations: [HomePage, ListRoomComponent],\n  providers: [HomeService, HomeLogicService]\n})\nexport class HomePageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { of } from 'rxjs';\nimport { catchError, filter, flatMap, map } from 'rxjs/operators';\nimport { EditProfileModalComponent } from 'src/app/shared/component/modal/edit-profile-modal/edit-profile-modal.component';\n\nimport { HomeLogicService } from './logic/home-logic.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\n\nexport class HomePage implements OnInit {\n  email: string;\n  attributes: {\n    email: string,\n    email_verified: boolean,\n    sub: string,\n  }\n\n  constructor(\n    private logic: HomeLogicService,\n    private modalCtrl: ModalController,\n  ) { }\n\n  ngOnInit() {\n    this.logic.fetchCurrentUser()\n      .pipe(map((attributes) => {\n        this.attributes = attributes;\n      }))\n      .pipe(flatMap(() => this.logic.checkRegistrationUser(this.attributes)))\n      .pipe(filter(({ items }) => items.length === 0), catchError(() => of('Already')))\n      .subscribe((data) => {\n        if (data === 'Already') {\n          return;\n        }\n        this.presentRegistrationUser()\n      });\n  }\n\n  async presentRegistrationUser() {\n    const modal = await this.modalCtrl.create({\n      component: EditProfileModalComponent,\n      componentProps: {\n        'status': 'new',\n        'email': this.attributes.email,\n        'userId': this.attributes.sub,\n      },\n    })\n    return modal.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}
{"version":3,"sources":["webpack:///src/app/pages/home/componet/list-room/list-room.component.html","webpack:///src/app/pages/home/home.page.html","webpack:///src/app/pages/home/componet/list-room/list-room.component.scss","webpack:///src/app/pages/home/componet/list-room/list-room.component.ts","webpack:///src/app/pages/home/home-routing.module.ts","webpack:///src/app/pages/home/home.module.ts","webpack:///src/app/pages/home/home.page.scss","webpack:///src/app/pages/home/home.page.ts"],"names":["ListRoomComponent","modalCtrl","homeLogic","router","listRoom","subscribe","result","roomList","companyId","create","component","modal","observable","onDidDismiss","pipe","data","createRoom","response","present","room","navigate","id","roomId","deleteRoomItem","selector","template","routes","path","HomePageRoutingModule","imports","forChild","exports","HomePageModule","entryComponents","declarations","providers","HomePage","logic","fetchCurrentUser","attributes","checkRegistrationUser","items","length","presentRegistrationUser","componentProps","email","sub"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACaf,QAAaA,iBAAiB;AAI5B,iCACUC,SADV,EAEUC,SAFV,EAGUC,MAHV,EAGwB;AAAA;;AAFd,aAAAF,SAAA,GAAAA,SAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACL;;AARuB;AAAA;AAAA,mCAUjB;AAAA;;AACT,eAAKD,SAAL,CAAeE,QAAf,CAAwB,cAAxB,EAAwCC,SAAxC,CAAkD,UAACC,MAAD,EAAY;AAC5D,iBAAI,CAACC,QAAL,GAAgBD,MAAhB;AACD,WAFD;AAGD;AAd2B;AAAA;AAAA,2CAgBHE,SAhBG,EAgBgB;;;;;;;;;;AAC5B,2BAAM,KAAKP,SAAL,CAAeQ,MAAf,CAAsB;AACxCC,+BAAS,EAAE;AAD6B,qBAAtB,CAAN;;;AAARC,yB;AAIAC,8B,GAAa,kDAAKD,KAAK,CAACE,YAAN,EAAL,C;AACnBD,8BAAU,CACPE,IADH,CACQ,+DAAQ;AAAA,0BAAGC,IAAH,QAAGA,IAAH;AAAA,6BAAc,MAAI,CAACb,SAAL,CAAec,UAAf,CAA0BD,IAA1B,CAAd;AAAA,qBAAR,CADR,EAEGD,IAFH,CAEQ,+DAAQ;AAAA,6BAAM,MAAI,CAACZ,SAAL,CAAeE,QAAf,CAAwB,cAAxB,CAAN;AAAA,qBAAR,CAFR,EAGGC,SAHH,CAGa,UAACY,QAAD,EAAc;AACvB,4BAAI,CAACV,QAAL,GAAgBU,QAAhB;AACD,qBALH;qDAMON,KAAK,CAACO,OAAN,E;;;;;;;;;AACR;AA7B2B;AAAA;AAAA,uCA+BbC,IA/Ba,EA+BT;AACjB,eAAKhB,MAAL,CAAYiB,QAAZ,CAAqB,CAAC,MAAD,YAAYD,IAAI,CAACE,EAAjB,EAArB;AACD;AAjC2B;AAAA;AAAA,mCAmCjBC,MAnCiB,EAmCX;AAAA;;AACf,eAAKpB,SAAL,CAAeqB,cAAf,CAA8BD,MAA9B,EAAsCR,IAAtC,CAA2C,+DAAQ;AAAA,mBAAM,MAAI,CAACZ,SAAL,CAAeE,QAAf,CAAwB,cAAxB,CAAN;AAAA,WAAR,CAA3C,EACGC,SADH,CACa,UAACY,QAAD,EAAc;AACvB,kBAAI,CAACV,QAAL,GAAgBU,QAAhB;AACD,WAHH;AAID;AAxC2B;;AAAA;AAAA,OAA9B;;;;cAKuB;;cACA;;cACH;;;;AAPPjB,qBAAiB,6DAL7B,gEAAU;AACTwB,cAAQ,EAAE,eADD;AAETC,cAAQ,EAAR;AAAA;AAAA,2HAFS;;;;AAAA,KAAV,CAK6B,E,+EAKP,8D,EACA,0E,EACH,sD,EAPU,GAAjBzB,iBAAiB,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRb,QAAM0B,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEjB,eAAS,EAAE;AAFb,KADqB,CAAvB;;AAWA,QAAakB,qBAAqB;AAAA;AAAA,KAAlC;;AAAaA,yBAAqB,6DAJjC,+DAAS;AACRC,aAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBJ,MAAtB,CAAD,CADD;AAERK,aAAO,EAAE,CAAC,4DAAD;AAFD,KAAT,CAIiC,GAArBH,qBAAqB,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOb,QAAaI,cAAc;AAAA;AAAA,KAA3B;;AAAaA,kBAAc,6DAb1B,+DAAS;AACRH,aAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0EAHO,EAIP,kEAJO,CADD;AAORI,qBAAe,EAAE,EAPT;AAURC,kBAAY,EAAE,CAAC,mDAAD,EAAW,yFAAX,CAVN;AAWRC,eAAS,EAAE,CAAC,yEAAD,EAAc,0EAAd;AAXH,KAAT,CAa0B,GAAdH,cAAc,CAAd;;;;;;;;;;;;;;;;ACvBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcf,QAAaI,QAAQ;AAQnB,wBACUC,KADV,EAEUpC,SAFV,EAEoC;AAAA;;AAD1B,aAAAoC,KAAA,GAAAA,KAAA;AACA,aAAApC,SAAA,GAAAA,SAAA;AACL;;AAXc;AAAA;AAAA,mCAaR;AAAA;;AACT,eAAKoC,KAAL,CAAWC,gBAAX,GACGxB,IADH,CACQ,2DAAI,UAACyB,UAAD,EAAgB;AACxB,kBAAI,CAACA,UAAL,GAAkBA,UAAlB;AACD,WAFK,CADR,EAIGzB,IAJH,CAIQ,+DAAQ;AAAA,mBAAM,MAAI,CAACuB,KAAL,CAAWG,qBAAX,CAAiC,MAAI,CAACD,UAAtC,CAAN;AAAA,WAAR,CAJR,EAKGzB,IALH,CAKQ,8DAAO;AAAA,gBAAG2B,KAAH,SAAGA,KAAH;AAAA,mBAAeA,KAAK,CAACC,MAAN,KAAiB,CAAhC;AAAA,WAAP,CALR,EAKmD,kEAAW;AAAA,mBAAM,gDAAG,SAAH,CAAN;AAAA,WAAX,CALnD,EAMGrC,SANH,CAMa,UAACU,IAAD,EAAU;AACnB,gBAAIA,IAAI,KAAK,SAAb,EAAwB;AACtB;AACD;;AACD,kBAAI,CAAC4B,uBAAL;AACD,WAXH;AAYD;AA1BkB;AAAA;AAAA,kDA4Ba;;;;;;;;AAChB,2BAAM,KAAK1C,SAAL,CAAeQ,MAAf,CAAsB;AACxCC,+BAAS,EAAE,wIAD6B;AAExCkC,oCAAc,EAAE;AACd,kCAAU,KADI;AAEd,iCAAS,KAAKL,UAAL,CAAgBM,KAFX;AAGd,kCAAU,KAAKN,UAAL,CAAgBO;AAHZ;AAFwB,qBAAtB,CAAN;;;AAARnC,yB;sDAQCA,KAAK,CAACO,OAAN,E;;;;;;;;;AACR;AAtCkB;;AAAA;AAAA,OAArB;;;;cASmB;;cACI;;;;AAVVkB,YAAQ,6DANpB,gEAAU;AACTZ,cAAQ,EAAE,UADD;AAETC,cAAQ,EAAR;AAAA;AAAA,8FAFS;;;;AAAA,KAAV,CAMoB,E,+EASF,0E,EACI,8D,EAVF,GAARW,QAAQ,CAAR","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-list>\\n  <ion-list-header>\\n    <ion-label>Want to</ion-label>\\n    <ion-button (click)=\\\"presentAddRoomItem('002')\\\">\\n      <ion-icon name=\\\"add-outline\\\"></ion-icon>\\n    </ion-button>\\n  </ion-list-header>\\n  <ion-item-sliding #slidingItem *ngFor=\\\"let room of roomList\\\">\\n    <ion-item (click)=\\\"navigateToTask(room)\\\">\\n      <!-- <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"../../../assets/img/sojiro-taku.jpg\\\" />\\n      </ion-avatar> -->\\n      <ion-label>\\n        <h2>{{ room.name }}</h2>\\n        <p>{{ room.describe }}</p>\\n      </ion-label>\\n    </ion-item>\\n    <ion-item-options side=\\\"end\\\">\\n      <ion-item-option color=\\\"danger\\\">\\n        <ion-icon\\n          slot=\\\"icon-only\\\"\\n          name=\\\"trash\\\"\\n          (click)=\\\"deleteRoom(room.id)\\\"\\n        ></ion-icon>\\n      </ion-item-option>\\n    </ion-item-options>\\n  </ion-item-sliding>\\n</ion-list>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>会社名</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <app-list-room></app-list-room>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hvbWUvY29tcG9uZXQvbGlzdC1yb29tL2xpc3Qtcm9vbS5jb21wb25lbnQuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { AddRoomModalComponent } from '../../../../shared/component/modal/add-room-modal/add-room-modal.component';\nimport { HomeLogicService } from '../../logic/home-logic.service';\nimport { from } from 'rxjs';\nimport { flatMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-list-room',\n  templateUrl: './list-room.component.html',\n  styleUrls: ['./list-room.component.scss'],\n})\nexport class ListRoomComponent implements OnInit {\n\n  roomList: Array<any>;\n\n  constructor(\n    private modalCtrl: ModalController,\n    private homeLogic: HomeLogicService,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n    this.homeLogic.listRoom('takuCloudCom').subscribe((result) => {\n      this.roomList = result;\n    })\n  }\n\n  async presentAddRoomItem(companyId: string) {\n    const modal = await this.modalCtrl.create({\n      component: AddRoomModalComponent,\n    });\n\n    const observable = from(modal.onDidDismiss());\n    observable\n      .pipe(flatMap(({ data }) => this.homeLogic.createRoom(data)))\n      .pipe(flatMap(() => this.homeLogic.listRoom('takuCloudCom')))\n      .subscribe((response) => {\n        this.roomList = response;\n      })\n    return modal.present();\n  }\n\n  navigateToTask(room): void {\n    this.router.navigate(['task', `${room.id}`]);\n  }\n\n  deleteRoom(roomId): void {\n    this.homeLogic.deleteRoomItem(roomId).pipe(flatMap(() => this.homeLogic.listRoom('takuCloudCom')))\n      .subscribe((response) => {\n        this.roomList = response;\n      })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { HomePageRoutingModule } from './home-routing.module';\nimport { SharedModule } from '../../shared/shared.module';\nimport { HomePage } from './home.page';\nimport { ListRoomComponent } from './componet/list-room/list-room.component';\nimport { HomeService } from './service/home-service.service';\nimport { HomeLogicService } from './logic/home-logic.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    HomePageRoutingModule,\n    SharedModule,\n  ],\n  entryComponents: [\n\n  ],\n  declarations: [HomePage, ListRoomComponent],\n  providers: [HomeService, HomeLogicService]\n})\nexport class HomePageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { of } from 'rxjs';\nimport { catchError, filter, flatMap, map } from 'rxjs/operators';\nimport { EditProfileModalComponent } from 'src/app/shared/component/modal/edit-profile-modal/edit-profile-modal.component';\n\nimport { HomeLogicService } from './logic/home-logic.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\n\nexport class HomePage implements OnInit {\n  email: string;\n  attributes: {\n    email: string,\n    email_verified: boolean,\n    sub: string,\n  }\n\n  constructor(\n    private logic: HomeLogicService,\n    private modalCtrl: ModalController,\n  ) { }\n\n  ngOnInit() {\n    this.logic.fetchCurrentUser()\n      .pipe(map((attributes) => {\n        this.attributes = attributes;\n      }))\n      .pipe(flatMap(() => this.logic.checkRegistrationUser(this.attributes)))\n      .pipe(filter(({ items }) => items.length === 0), catchError(() => of('Already')))\n      .subscribe((data) => {\n        if (data === 'Already') {\n          return;\n        }\n        this.presentRegistrationUser()\n      });\n  }\n\n  async presentRegistrationUser() {\n    const modal = await this.modalCtrl.create({\n      component: EditProfileModalComponent,\n      componentProps: {\n        'status': 'new',\n        'email': this.attributes.email,\n        'userId': this.attributes.sub,\n      },\n    })\n    return modal.present();\n  }\n\n}\n"]}
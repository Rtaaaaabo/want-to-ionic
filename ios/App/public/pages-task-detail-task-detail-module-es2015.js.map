{"version":3,"sources":["./src/app/pages/task-detail/task-detail.page.html","./src/app/pages/task-detail/logic/task-detail-logic.service.ts","./src/app/pages/task-detail/service/task-detail-service.service.ts","./src/app/pages/task-detail/task-detail-routing.module.ts","./src/app/pages/task-detail/task-detail.module.ts","./src/app/pages/task-detail/task-detail.page.scss","./src/app/pages/task-detail/task-detail.page.ts"],"names":[],"mappings":"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","file":"pages-task-detail-task-detail-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>タスクの詳細</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"goBackToRoom()\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"presentActionSheet(taskDetail)\\\">\\n        <ion-icon name=\\\"ellipsis-horizontal-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-icon\\n      class=\\\"ion-padding\\\"\\n      *ngIf=\\\"taskDetail?.status > 0\\\"\\n      size=\\\"large\\\"\\n      name=\\\"checkmark-circle\\\"\\n      color=\\\"secondary\\\"\\n    ></ion-icon>\\n    <ion-card-header class=\\\"card-title\\\">\\n      <ion-card-title>{{ taskDetail?.title }}</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-item class=\\\"card-background\\\" lines=\\\"none\\\">\\n        <ion-text>{{ taskDetail?.description}}</ion-text>\\n      </ion-item>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <!-- ここから下はCommentとMessage -->\\n  <ion-list>\\n    <ion-list-header>\\n      <ion-label>コメント</ion-label>\\n    </ion-list-header>\\n    <ion-item *ngFor=\\\"let item of message\\\">\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"../../../assets/svg/anonymous.svg\\\" />\\n      </ion-avatar>\\n      <ion-label>\\n        <h3>{{ item.content }}</h3>\\n        <p>送信者の名前</p>\\n      </ion-label>\\n    </ion-item>\\n    <!-- <ion-item> MEssage </ion-item>\\n    <ion-item> MEssage </ion-item> -->\\n  </ion-list>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar light=\\\"light\\\">\\n    <ion-row align-items-center class=\\\"ion-no-padding\\\">\\n      <ion-col class=\\\"center-align\\\" size=\\\"10\\\">\\n        <textarea\\n          autosize\\n          maxRows=\\\"2\\\"\\n          [(ngModel)]=\\\"newMsg\\\"\\n          class=\\\"message-input\\\"\\n        ></textarea>\\n      </ion-col>\\n      <ion-col class=\\\"center-align\\\" size=\\\"2\\\">\\n        <ion-button\\n          expand=\\\"block\\\"\\n          fill=\\\"clear\\\"\\n          color=\\\"primary\\\"\\n          [disabled]=\\\"newMsg === ''\\\"\\n          class=\\\"msg-btn\\\"\\n          (click)=\\\"sendMessage()\\\"\\n        >\\n          <ion-icon name=\\\"send\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","import { Injectable } from '@angular/core';\nimport { AmplifyService, OnCreateMessageSubscription } from '../../../shared/service/amplify.service';\nimport { TaskDetailServiceService } from '../service/task-detail-service.service';\nimport { Observable, from } from 'rxjs';\nimport { v4 as uuid } from 'uuid';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TaskDetailLogicService {\n\n  constructor(\n    private taskDetailService: TaskDetailServiceService,\n  ) { }\n\n  fetchAnyTask(taskId: string): Observable<any> {\n    return from(this.taskDetailService.getTask(taskId));\n  }\n\n  fetchMessagePerTask(taskId: string): Observable<any> {\n    const filterContent = {\n      taskID: {\n        eq: `${taskId}`\n      }\n    }\n    return from(this.taskDetailService.fetchMessagePerTask(filterContent))\n  }\n\n  updateTaskItem(taskItem, status): Observable<any> {\n    const content = {\n      id: taskItem.id,\n      status: status,\n    }\n    return this.taskDetailService.updateTaskItem(content);\n  }\n\n  sendNewMessage(taskId, messageContent): Observable<any> {\n    const inputContent = {\n      id: `${uuid()}`,\n      content: messageContent,\n      taskID: taskId,\n      isSent: true,\n    }\n    return this.taskDetailService.createMessageItem(inputContent);\n  }\n\n  // OnCreateMessageSubscription\n  onCreateMessageListener() {\n    return this.taskDetailService.onMessageListener();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { AmplifyService, GetTaskQuery, OnCreateMessageSubscription } from '../../../shared/service/amplify.service';\nimport { Observable, from } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TaskDetailServiceService {\n\n  constructor(\n    private amplifyService: AmplifyService,\n  ) { }\n\n  getTask(taskId: string): Observable<GetTaskQuery> {\n    return from(this.amplifyService.GetTask(taskId))\n  }\n\n  fetchMessagePerTask(filterInfo): Observable<any> {\n    return from(this.amplifyService.ListMessages(filterInfo));\n  }\n\n  updateTaskItem(inputContent): Observable<any> {\n    return from(this.amplifyService.UpdateTask(inputContent));\n  }\n\n  createMessageItem(inputContent): Observable<any> {\n    return from(this.amplifyService.CreateMessage(inputContent));\n  }\n\n  onMessageListener() {\n    return this.amplifyService.OnCreateMessageListener;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule, ExtraOptions } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { TaskDetailPage } from './task-detail.page';\n\nconst routes: Routes = [\n  {\n    path: ':id/:segment',\n    component: TaskDetailPage\n  },\n  {\n    path: '',\n    redirectTo: ':id',\n    pathMatch: 'full'\n  }\n];\n\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TaskDetailPageRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\n\nimport { TaskDetailPageRoutingModule } from './task-detail-routing.module';\n\nimport { TaskDetailPage } from './task-detail.page';\nimport { SharedModule } from '../../shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    TaskDetailPageRoutingModule\n  ],\n  declarations: [TaskDetailPage]\n})\nexport class TaskDetailPageModule { }\n","export default \".my-custom-class .action-sheet-group {\\n  background: #e5e5e5;\\n}\\n\\n.card-background {\\n  --background: \\\"#1c1c1d\\\";\\n}\\n\\n.end-done-icon {\\n  margin-left: auto;\\n  margin-right: 50px;\\n}\\n\\n.message-input {\\n  width: 100%;\\n  border: 1px solid var(--ion-color-medium);\\n  border-radius: 10px;\\n  background: #fff;\\n  resize: none;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n\\n.msg-btn {\\n  --padding-start: 0.5em;\\n  --padding-end: 0.5em;\\n}\\n\\n.card-title {\\n  font-size: medium;\\n}\\n\\n.center-align {\\n  margin-top: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWt1bmFrYWdhd2EvZGV2L2lvbmljL3dhbnRUby9zcmMvYXBwL3BhZ2VzL3Rhc2stZGV0YWlsL3Rhc2stZGV0YWlsLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvdGFzay1kZXRhaWwvdGFzay1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksbUJBQUE7QUNDSjs7QURFQTtFQUNJLHVCQUFBO0FDQ0o7O0FERUE7RUFDSSxpQkFBQTtFQUNBLGtCQUFBO0FDQ0o7O0FERUE7RUFDSSxXQUFBO0VBQ0EseUNBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7QUNDSjs7QURFQTtFQUNJLHNCQUFBO0VBQ0Esb0JBQUE7QUNDSjs7QURFQTtFQUNJLGlCQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdGFzay1kZXRhaWwvdGFzay1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm15LWN1c3RvbS1jbGFzcyAuYWN0aW9uLXNoZWV0LWdyb3VwIHtcbiAgICBiYWNrZ3JvdW5kOiAjZTVlNWU1O1xufVxuXG4uY2FyZC1iYWNrZ3JvdW5kIHtcbiAgICAtLWJhY2tncm91bmQ6ICcjMWMxYzFkJztcbn1cblxuLmVuZC1kb25lLWljb24ge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogNTBweDtcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYmFja2dyb3VuZDogI2ZmZjtcbiAgICByZXNpemU6IG5vbmU7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7XG59XG5cbi5tc2ctYnRuIHtcbiAgICAtLXBhZGRpbmctc3RhcnQ6IDAuNWVtO1xuICAgIC0tcGFkZGluZy1lbmQ6IDAuNWVtO1xufVxuXG4uY2FyZC10aXRsZSB7XG4gICAgZm9udC1zaXplOiBtZWRpdW07XG59XG5cbi5jZW50ZXItYWxpZ24ge1xuICAgIG1hcmdpbi10b3A6IGF1dG87XG59IiwiLm15LWN1c3RvbS1jbGFzcyAuYWN0aW9uLXNoZWV0LWdyb3VwIHtcbiAgYmFja2dyb3VuZDogI2U1ZTVlNTtcbn1cblxuLmNhcmQtYmFja2dyb3VuZCB7XG4gIC0tYmFja2dyb3VuZDogXCIjMWMxYzFkXCI7XG59XG5cbi5lbmQtZG9uZS1pY29uIHtcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIG1hcmdpbi1yaWdodDogNTBweDtcbn1cblxuLm1lc3NhZ2UtaW5wdXQge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQ6ICNmZmY7XG4gIHJlc2l6ZTogbm9uZTtcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xufVxuXG4ubXNnLWJ0biB7XG4gIC0tcGFkZGluZy1zdGFydDogMC41ZW07XG4gIC0tcGFkZGluZy1lbmQ6IDAuNWVtO1xufVxuXG4uY2FyZC10aXRsZSB7XG4gIGZvbnQtc2l6ZTogbWVkaXVtO1xufVxuXG4uY2VudGVyLWFsaWduIHtcbiAgbWFyZ2luLXRvcDogYXV0bztcbn0iXX0= */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Location, ViewportScroller } from '@angular/common';\nimport { ActivatedRoute } from '@angular/router';\nimport { ModalController, ActionSheetController, ToastController, IonContent, Platform } from '@ionic/angular';\nimport { from, Observable } from 'rxjs';\nimport { TaskDetailLogicService } from './logic/task-detail-logic.service';\nimport { AddTaskModalComponent } from 'src/app/shared/component/modal/add-task-modal/add-task-modal.component';\nimport { flatMap, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-task-detail',\n  templateUrl: './task-detail.page.html',\n  styleUrls: ['./task-detail.page.scss'],\n})\nexport class TaskDetailPage implements OnInit {\n  @ViewChild('comment') child: HTMLElement;\n  @ViewChild(IonContent, { static: false }) content: IonContent;\n  taskId: string;\n  segment: string;\n  taskDetail;\n  link = \"comment\"\n  testHref;\n  fragmentComment = '\u001d';\n  newMsg: string = '';\n  message;\n\n\n  constructor(\n    private location: Location,\n    private logic: TaskDetailLogicService,\n    private route: ActivatedRoute,\n    private scroll: ViewportScroller,\n    private modalCtrl: ModalController,\n    private actionSheetCtrl: ActionSheetController,\n    private toastCtrl: ToastController,\n    private platform: Platform,\n  ) {\n    this.initializeApp()\n      .subscribe(() => {\n        this.logic.onCreateMessageListener()\n          .subscribe(() => {\n            this.logic.fetchMessagePerTask(this.taskId)\n              .subscribe((result) => {\n                this.message = result.items\n              })\n          });\n      });\n  }\n\n  ngOnInit() {\n    this.taskId = this.route.snapshot.paramMap.get('id');\n    this.segment = this.route.snapshot.paramMap.get('segment');\n    this.testHref = `task-detail/${this.taskId}#comment`;\n    this.logic.fetchAnyTask(this.taskId).subscribe((data) => {\n      this.taskDetail = data;\n    });\n    this.logic.fetchMessagePerTask(this.taskId).subscribe((data) => {\n      this.message = data.items;\n    })\n  }\n\n  sendMessage() {\n    this.logic.sendNewMessage(this.taskId, this.newMsg)\n      .subscribe(() => this.newMsg = '');\n  }\n\n  async presentDoneToast(): Promise<void> {\n    const toast = await this.toastCtrl.create({\n      message: 'おつかれさまでした！',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  async presentMoveTask(): Promise<void> {\n    const toast = await this.toastCtrl.create({\n      message: '再度、戻しました。',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  ngAfterViewInit(): void {\n    this.route.fragment.subscribe((result) => {\n      this.scroll.scrollToAnchor(result);\n    });\n  }\n\n  async presentModalEditTask(taskDetail) {\n    const modal = await this.modalCtrl.create({\n      component: AddTaskModalComponent,\n      componentProps: { taskDetail: taskDetail },\n    });\n    return modal.present();\n  }\n\n  doneTask(taskDetail) {\n    const presentToast = from(this.presentDoneToast());\n    this.logic.updateTaskItem(taskDetail, 10)\n      .pipe(flatMap(() => this.logic.fetchAnyTask(taskDetail.id)))\n      .pipe(tap(() => presentToast)).subscribe((data) => this.taskDetail = data);\n  }\n\n  moveTask(taskDetail) {\n    const presentToast = from(this.presentMoveTask());\n    this.logic.updateTaskItem(taskDetail, 0)\n      .pipe(flatMap(() => this.logic.fetchAnyTask(taskDetail.id)))\n      .pipe(tap(() => presentToast)).subscribe((data) => this.taskDetail = data);\n  }\n\n  async presentActionSheet(taskDetail) {\n\n    const activeActionSheet = await this.actionSheetCtrl.create({\n      cssClass: 'my-custom-class',\n      buttons: [\n        {\n          text: '完了',\n          handler: () => {\n            this.doneTask(taskDetail);\n          }\n        },\n        {\n          text: '編集',\n          handler: () => {\n            this.presentModalEditTask(taskDetail)\n          }\n        },\n        {\n          text: '削除',\n          role: 'destructive',\n          handler: () => {\n            this.deleteTask(taskDetail)\n          }\n        },\n        {\n          text: 'キャンセル',\n          role: 'cancel',\n        }\n      ]\n    });\n\n    const doneActionSheet = await this.actionSheetCtrl.create({\n      cssClass: 'my-custom-class',\n      buttons: [\n        {\n          text: 'Activeに移動',\n          handler: () => {\n            this.moveTask(taskDetail);\n          }\n        },\n        {\n          text: '編集',\n          handler: () => {\n            this.presentModalEditTask(taskDetail)\n          }\n        },\n        {\n          text: '削除',\n          role: 'destructive',\n          handler: () => {\n            this.deleteTask(taskDetail)\n          }\n        },\n        {\n          text: 'キャンセル',\n          role: 'cancel',\n        }\n      ]\n    });\n\n    if (this.segment === 'active') {\n      await activeActionSheet.present();\n    } else if (this.segment === 'done') {\n      await doneActionSheet.present();\n    }\n  }\n\n  deleteTask(taskDetail) {\n    console.log('削除します。', taskDetail);\n  }\n\n  goBackToRoom() {\n    this.location.back();\n  }\n\n\n  initializeApp(): Observable<string> {\n    return from(this.platform.ready());\n  }\n\n}\n"],"sourceRoot":"webpack:///"}
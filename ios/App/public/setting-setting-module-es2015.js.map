{"version":3,"sources":["./src/app/pages/setting/setting.page.html","./src/app/pages/setting/logic/setting-logic.service.ts","./src/app/pages/setting/service/setting-service.service.ts","./src/app/pages/setting/setting-routing.module.ts","./src/app/pages/setting/setting.module.ts","./src/app/pages/setting/setting.page.scss","./src/app/pages/setting/setting.page.ts"],"names":[],"mappings":"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","file":"setting-setting-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>設定</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-item>\\n    <ion-avatar class=\\\"profile-icon\\\">\\n      <img src=\\\"../../../assets/svg/anonymous.svg\\\" />\\n    </ion-avatar>\\n    <ion-label class=\\\"margin-left\\\">\\n      <h2>{{ user?.username }}</h2>\\n      <p>{{ user?.positionName }}</p>\\n      <a (click)=\\\"presentEditModal()\\\">編集</a>\\n    </ion-label>\\n  </ion-item>\\n  <!-- <ion-card>\\n    <ion-card-content>\\n      <p>test</p>\\n      <ion-list>\\n        <ion-item> TEST </ion-item>\\n        <ion-item> TEST </ion-item>\\n        <ion-item> TEST </ion-item>\\n        <ion-item lines=\\\"none\\\"> TEST </ion-item>\\n      </ion-list>\\n    </ion-card-content>\\n  </ion-card> -->\\n  <ion-item\\n    class=\\\"logout-line\\\"\\n    lines=\\\"none\\\"\\n    color=\\\"danger\\\"\\n    (click)=\\\"confirmLogout()\\\"\\n    >ログアウト</ion-item\\n  >\\n</ion-content>\\n\";","import { Injectable } from '@angular/core';\nimport { SessionService } from '../../../shared/service/session.service';\nimport { Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { SettingService } from '../service/setting-service.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SettingLogic {\n\n  constructor(\n    private sessionService: SessionService,\n    private settingService: SettingService,\n  ) { }\n\n  signOut(): Observable<any> {\n    return this.sessionService.signOut()\n      .pipe(catchError((error) => { return error }))\n  }\n\n  fetchCurrentUser(): Observable<any> {\n    return this.sessionService.fetchCurrentUser();\n  }\n\n  fetchUserInfo(userId): Observable<any> {\n    return this.settingService.fetchUserInfo(userId);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, from } from 'rxjs';\nimport { AmplifyService } from '../../../shared/service/amplify.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SettingService {\n\n  constructor(\n    private amplifyService: AmplifyService,\n  ) { }\n\n  fetchUserInfo(userId): Observable<any> {\n    return from(this.amplifyService.GetUser(userId));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingPage } from './setting.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SettingPageRoutingModule } from './setting-routing.module';\n\nimport { SettingPage } from './setting.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SettingPageRoutingModule\n  ],\n  declarations: [SettingPage]\n})\nexport class SettingPageModule {}\n","export default \".margin-left {\\n  margin-left: 20px;\\n}\\n\\n.profile-icon {\\n  width: 48px;\\n  height: 48px;\\n}\\n\\n.logout-line {\\n  margin: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YWt1bmFrYWdhd2EvZGV2L2lvbmljL3dhbnRUby9zcmMvYXBwL3BhZ2VzL3NldHRpbmcvc2V0dGluZy5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3NldHRpbmcvc2V0dGluZy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpQkFBQTtBQ0NKOztBREVBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNDSjs7QURFQTtFQUNJLFlBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NldHRpbmcvc2V0dGluZy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFyZ2luLWxlZnQge1xuICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xufVxuXG4ucHJvZmlsZS1pY29uIHtcbiAgICB3aWR0aDogNDhweDtcbiAgICBoZWlnaHQ6IDQ4cHg7XG59XG5cbi5sb2dvdXQtbGluZSB7XG4gICAgbWFyZ2luOiAxMHB4O1xufSIsIi5tYXJnaW4tbGVmdCB7XG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xufVxuXG4ucHJvZmlsZS1pY29uIHtcbiAgd2lkdGg6IDQ4cHg7XG4gIGhlaWdodDogNDhweDtcbn1cblxuLmxvZ291dC1saW5lIHtcbiAgbWFyZ2luOiAxMHB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ActionSheetController, ModalController } from '@ionic/angular';\nimport { SettingLogic } from './logic/setting-logic.service';\nimport { EditProfileModalComponent } from '../../shared/component/modal/edit-profile-modal/edit-profile-modal.component';\nimport { from } from 'rxjs';\nimport { flatMap } from 'rxjs/operators';\n\n// interface User\ninterface OwnUser {\n  authority: string;\n  companyID: string;\n  createdAt: string;\n  positionName: string;\n  email: string;\n  id: string;\n  registered?: boolean\n  updatedAt: string;\n  username: string;\n  __typename: string;\n}\n\n@Component({\n  selector: 'app-setting',\n  templateUrl: './setting.page.html',\n  styleUrls: ['./setting.page.scss'],\n})\nexport class SettingPage implements OnInit {\n\n  user: OwnUser;\n\n  constructor(\n    private actionSheetCtrl: ActionSheetController,\n    private logic: SettingLogic,\n    private router: Router,\n    private modalCtrl: ModalController,\n  ) { }\n\n  ngOnInit() {\n    this.logic.fetchCurrentUser()\n      .pipe(flatMap((result) => this.logic.fetchUserInfo(result.username)))\n      .subscribe((data) => {\n        console.log(data);\n        this.user = data;\n      });\n  }\n\n  async confirmLogout() {\n    const logoutActionSheet = await this.actionSheetCtrl.create({\n      cssClass: 'my-custom-class',\n      buttons: [\n        {\n          text: '\bログアウト',\n          role: 'destructive',\n          handler: () => {\n            this.actionLogout()\n          }\n        },\n        {\n          text: 'キャンセル',\n          role: 'cancel',\n        }\n      ]\n    });\n    return logoutActionSheet.present();\n  }\n\n  actionLogout() {\n    this.logic.signOut().subscribe(() => this.router.navigate(['/login']));\n  }\n\n  async presentEditModal(): Promise<void> {\n    const modal = await this.modalCtrl.create({\n      component: EditProfileModalComponent,\n      componentProps: {\n        status: 'already',\n        user: this.user,\n      }\n    });\n    const observable = from(modal.onDidDismiss());\n    return modal.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}